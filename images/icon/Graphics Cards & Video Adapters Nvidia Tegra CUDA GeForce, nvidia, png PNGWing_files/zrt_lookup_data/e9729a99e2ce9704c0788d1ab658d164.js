(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var aa=this||self;function k(a,b){a=a.split(".");var c=aa;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};var m={},p=null;
function q(a){var b;void 0===b&&(b=0);if(!p){p={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=["+/=","+/","-_=","-_.","-_"],e=0;5>e;e++){var f=c.concat(d[e].split(""));m[e]=f;for(var g=0;g<f.length;g++){var h=f[g];void 0===p[h]&&(p[h]=g)}}}b=m[b];c=Array(Math.floor(a.length/3));d=b[64]||"";for(e=f=0;f<a.length-2;f+=3){var l=a[f],n=a[f+1];h=a[f+2];g=b[l>>2];l=b[(l&3)<<4|n>>4];n=b[(n&15)<<2|h>>6];h=b[h&63];c[e++]=g+l+n+h}g=0;h=d;switch(a.length-f){case 2:g=
a[f+1],h=b[(g&15)<<2]||d;case 1:a=a[f],c[e]=b[a>>2]+b[(a&3)<<4|g>>4]+h+d}return c.join("")};var r="undefined"!==typeof Uint8Array,t={};let u;var v=class{constructor(a){if(t!==t)throw Error("illegal external caller");this.v=a;if(null!=a&&0===a.length)throw Error("ByteString should be constructed with non-empty values");}};const w=Symbol(void 0);function x(a,b){Object.isFrozen(a)||(w?a[w]|=b:void 0!==a.m?a.m|=b:Object.defineProperties(a,{m:{value:b,configurable:!0,writable:!0,enumerable:!1}}))}function y(a){let b;w?b=a[w]:b=a.m;return null==b?0:b}function z(a){x(a,1);return a}function A(a){return Array.isArray(a)?!!(y(a)&2):!1}function B(a){if(!Array.isArray(a))throw Error("cannot mark non-array as immutable");x(a,2)}
function C(a,b){if(!Array.isArray(a))throw Error("cannot mark non-array as mutable");b?x(a,8):Object.isFrozen(a)||(w?a[w]&=-9:void 0!==a.m&&(a.m&=-9))};function D(a){return null!==a&&"object"===typeof a&&!Array.isArray(a)&&a.constructor===Object}var E=Object.freeze(z([]));function F(a){if(A(a.i))throw Error("Cannot mutate an immutable Message");}function G(a){return{value:a,configurable:!1,writable:!1,enumerable:!1}};function H(a,b){if(Array.isArray(a))return new b(a)};function ba(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(a&&!Array.isArray(a)){if(r&&null!=a&&a instanceof Uint8Array)return q(a);if(a instanceof v){var b=a.v;b=null==b||"string"===typeof b?b:r&&b instanceof Uint8Array?q(b):null;return null==b?"":a.v=b}}}return a};function I(a,b=ca){return J(a,b)}function K(a,b){if(null!=a){if(Array.isArray(a))a=J(a,b);else if(D(a)){const c={};for(let d in a)c[d]=K(a[d],b);a=c}else a=b(a);return a}}function J(a,b){const c=a.slice();for(let d=0;d<c.length;d++)c[d]=K(c[d],b);Array.isArray(a)&&y(a)&1&&z(c);return c}function L(a){if(a&&"object"==typeof a&&a.toJSON)return a.toJSON();a=ba(a);return Array.isArray(a)?I(a,L):a}
function ca(a){if("object"===typeof a){if(r&&null!=a&&a instanceof Uint8Array)return new Uint8Array(a);if(Array.isArray(a.i)&&a.constructor!==Object){var b;M=b=I(a.i);b=new a.constructor(b);M=null;N(b,a);return b}}return a};function O(a){return a.h||(a.h=a.i[a.j+a.l]={})}function P(a,b,c=!1){return-1===b?null:b>=a.j?a.h?a.h[b]:void 0:c&&a.h&&(c=a.h[b],null!=c)?c:a.i[b+a.l]}function Q(a,b,c,d=!1){F(a);if(b>=a.j||d)O(a)[b]=c;else{if(void 0!==a.h&&a.j>=a.i.length){d=a.i.length-1;const e=b+a.l;e>=d?(a.i[d]=void 0,a.i[e]=c,a.i.push(a.h)):a.i[e]=c}else a.i[b+a.l]=c;void 0!==a.h&&b in a.h&&delete a.h[b]}}
function R(a,b,c=!0,d){let e=P(a,b,d);Array.isArray(e)||(e=E);if(A(a.i))c&&(B(e),Object.freeze(e));else if(e===E||A(e))e=z(e.slice()),Q(a,b,e,d);return e}function S(a,b){a=P(a,b);return null==a?a:!!a}function da(a){a=P(a,3);return null==a?0:a}function ea(a){a=S(a,1);return null==a?!1:a}function T(a,b,c,d){F(a);c!==d?Q(a,b,c):Q(a,b,void 0,!1)}
function U(a,b,c,d=!1){{a.g||(a.g={});const e=a.g[c];if(e)b=e;else if(b=H(P(a,c,d),b))a.g[c]=b,A(a.i)&&B(b.i)}if(null==b)return b;A(b.i)&&!A(a.i)&&(b=b.u(),Q(a,c,b.i,d),a.g[c]=b);return b}
function fa(a,b,c,d,e=!0){a.g||(a.g={});var f=A(a.i);let g=a.g[c];d=R(a,c,!0,d);const h=f||A(d);if(!g){g=[];f=f||h;for(let n=0;n<d.length;n++){var l=d[n];f=f||A(l);l=H(l,b);void 0!==l&&(g.push(l),h&&B(l.i))}a.g[c]=g;C(d,!f)}b=h||e;e=A(g);b&&!e&&(Object.isFrozen(g)&&(a.g[c]=g=g.slice()),B(g),Object.freeze(g));!b&&e&&(a.g[c]=g=g.slice());return g}
function ha(a,b,c,d=!1){const e=A(a.i);b=fa(a,b,c,d,e);a=R(a,c,d);if(!(c=e)&&(c=a)){if(!Array.isArray(a))throw Error("cannot check mutability state of non-array");c=!(y(a)&8)}if(c){for(c=0;c<b.length;c++)(d=b[c])&&A(d.i)&&!e&&(b[c]=b[c].u(),a[c]=b[c].i);C(a,!0)}return b};function V(a,b){if(null==b||""==b)return new a;b=JSON.parse(b);if(!Array.isArray(b))throw a=typeof b,Error("Expected to deserialize an Array but got "+("object"!=a?a:b?Array.isArray(b)?"array":a:"null")+": "+b);M=b;a=new a(b);M=null;return a}
var ia=class{constructor(a,b,c){a||(a=M);M=null;var d=this.constructor.g||0,e=0<d;let f=this.constructor.h;a||(a=f?[f]:[]);e&&0<a.length&&D(a[a.length-1])&&"g"in a[a.length-1]&&(d=0);this.l=(f?0:-1)-d;this.g=void 0;this.i=a;a:{d=this.i.length;a=d-1;if(d&&(d=this.i[a],D(d))){this.h=d;b=Object.keys(d);0<b.length&&Array.prototype.every.call(b,isNaN,void 0)?this.j=Number.MAX_VALUE:this.j=a-this.l;break a}void 0!==b&&-1<b?(this.j=Math.max(b,a+1-this.l),this.h=void 0):this.j=Number.MAX_VALUE}if(!e&&this.h&&
"g"in this.h)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(c)for(e=0;e<c.length;e++)b=c[e],b<this.j?(b+=this.l,(a=this.i[b])?Array.isArray(a)&&z(a):this.i[b]=E):(a=O(this),(d=a[b])?Array.isArray(d)&&z(d):a[b]=E)}toJSON(){return I(this.i,L)}};ia.prototype.toString=function(){return this.i.toString()};
function N(a,b){b.s&&(a.s=b.s.slice());const c=b.g;if(c){b=b.h;for(let f in c){const g=c[f];if(g){var d=!(!b||!b[f]),e=+f;if(Array.isArray(g)){if(g.length)for(d=ha(a,g[0].constructor,e,d),e=0;e<Math.min(d.length,g.length);e++)N(d[e],g[e])}else(d=U(a,g.constructor,e,d))&&N(d,g)}}}}let M;var ja=class extends ia{u(){return this}};Object.defineProperties(ja,{[Symbol.hasInstance]:G(()=>{throw Error("Cannot perform instanceof checks for MutableMessage");})});function ka(a,b,c,d,e,f){if(a=a.g&&a.g[c])if(Array.isArray(a)){e=f.o?z(a.slice()):a;F(b);if(null!=e){f=z([]);d=!1;for(a=0;a<e.length;a++)f[a]=e[a].i,d=d||A(f[a]);b.g||(b.g={});b.g[c]=e;C(f,!d)}else b.g&&(b.g[c]=void 0),f=E;Q(b,c,f)}else e=a,F(b),b.g||(b.g={}),null==e?f=e=void 0:f=e.i,b.g[c]=e,Q(b,c,f);else r&&d instanceof Uint8Array?e=d.length?new v(new Uint8Array(d)):u||(u=new v(null)):(Array.isArray(d)&&(e?B(d):Array.isArray(d)&&y(d)&1&&f.o&&(d=d.slice())),e=d),Q(b,c,e)};class W extends ja{u(){if(A(this.i)){var {o:a}={o:!0};a={o:a};const c=A(this.i);if(c&&!a.o)throw Error("copyRepeatedFields must be true for frozen messages");const d=new this.constructor;this.s&&(d.s=this.s.slice());const e=this.i;for(let f=0;f<e.length;f++){const g=e[f];if(f===e.length-1&&D(g))for(b in g){const h=+b;Number.isNaN(h)?O(d)[b]=g[b]:ka(this,d,h,g[b],c,a)}else ka(this,d,f-this.l,g,c,a)}var b=d}else b=this;return b}}Object.defineProperties(W,{[Symbol.hasInstance]:G(Object[Symbol.hasInstance])});var ma=class extends W{constructor(a){super(a,-1,la)}},la=[8];var oa=class extends W{constructor(a){super(a,-1,na)}},na=[17];var qa=class extends W{constructor(a){super(a,-1,pa)}},pa=[27];var ra=class extends W{constructor(a){super(a)}};var ta=class extends W{constructor(a){super(a,-1,sa)}},sa=[1,2,3,6];var va=class extends W{constructor(){super(void 0,-1,ua)}},ua=[12];/*

 SPDX-License-Identifier: Apache-2.0
*/
function X(a,b){a=a.getElementsByTagName("META");for(let c=0;c<a.length;++c)if(a[c].getAttribute("name")===b)return a[c].getAttribute("content")||"";return""};function wa(a){if(!(0<a.g.length)){var b=X(a.body,"environment");for(const c of b.split("|"))c&&a.g.push(c)}}function Y(a,b){a=a.body;var c={detail:void 0};let d;"function"===typeof window.CustomEvent?d=new CustomEvent(b,c):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!!c.bubbles,!!c.cancelable,c.detail));a.dispatchEvent(d)}
var xa=class{constructor(a){this.body=a;this.g=[];this.h={};X(a,"sampling_mod");var b=X(a,"namespace");if(!b){b="ns-"+(0,Math.random)().toString(36).substr(2,5);a:{var c=a.getElementsByTagName("META");for(let d=0;d<c.length;++d)if("namespace"===c[d].getAttribute("name")&&c[d].getAttribute("index")===(0).toString()){c[d].setAttribute("content",b);break a}c=a.querySelector("#mys-meta");c||(c=document.createElement("div"),c.id="mys-meta",c.style.position="absolute",c.style.display="none",a.appendChild(c));
a=document.createElement("META");a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());c.appendChild(a)}}wa(this);!this.h.hasOwnProperty("META_LOCKED")&&(a=X(this.body,"custom_flags"))&&(this.h=JSON.parse(a))}addEventListener(a,b){this.body.addEventListener(a,b)}};var ya=class extends W{constructor(){super(void 0)}};function za(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function Aa(a){if(1>=a.h.offsetWidth||1>=a.h.offsetHeight)return!1;a.g.remove();Y(a.context,"spanReady");return!0}
var Ba=class{constructor(a,b){this.context=a;this.j=b;this.h=za("SPAN");this.g=za("DIV");this.h.style.fontSize="6px";this.h.textContent="go";this.g.style.position="absolute";this.g.style.top="100%";this.g.style.left="100%";this.g.style.width="1px";this.g.style.height="0";this.g.style.overflow="hidden";this.g.style.visibility="hidden";this.g.appendChild(this.h)}wait(){if(!ea(this.j)&&(Y(this.context,"spanStart"),this.context.body.appendChild(this.g),!Aa(this)))return new Promise(a=>{const b=setInterval(()=>
{Aa(this)&&(clearInterval(b),a())},da(this.j))})}};var Ca=class{constructor(a,b){this.context=a;this.h=U(b,qa,1);this.g=U(b,ma,12)||new ma;U(this.h,oa,10)||new oa}};var Da=class{constructor(){this.channel=3;(this.g=!(!window.mys||!window.mys.pingback))&&this.setData(43,Date.now()-window.mys.pingback.getBaseTime())}setAttribute(a,b){this.g&&window.mys.pingback.setAttribute(a,b)}setData(a,b){this.g&&window.mys.pingback.setData(a,b,this.channel)}send(a){this.g&&window.mys.pingback.send(a)}};function Ea(a){a.g&=-31}function Z(a,b){a.g|=b}var Fa=class{constructor(a,b){this.context=a;this.A=b;new va;this.g=0;this.pingback=new Da}h(){}};function Ga(a){V(ta,X(a.context.body,"engine_msg")||"[]");return a.g.h()||Promise.resolve()}
var Ha=class{constructor(a,b,c,d){this.g=d(a,b,c);this.context=this.g.context}init(){Ea(this.g);Z(this.g,1);let a;null==(a=window.AFMA_Communicator)||a.addEventListener("onshow",()=>{Z(this.g,32)});let b=0;const c=this.context.body;c.addEventListener("browserRender",()=>{++b;if(1===b)Y(this.context,"overallStart"),Ga(this).then(()=>{Y(this.context,"overallQuiet")});else{var d=c.clientHeight;c.clientWidth&&d&&Ga(this)}})}};function Ia(a){a.j.length=0;a.h=!0}function Ja(a,b){a.g=!0;const c=()=>{a.h=!1;const d=a.j.shift();return void 0===d?(a.g=!1,Promise.resolve()):Ja(a,d())};return b?b.then(c,()=>{if(a.h)return c();a.g=!1;return Promise.reject()}):c()}function Ka(a,b){for(const c of b)a.j.push(c);if(!a.g)return Ja(a)}var La=class{constructor(){this.h=this.g=!1;this.j=[]}};var Ma=class extends Fa{constructor(){super(...arguments);this.j=new La}h(){Ia(this.j);return Ka(this.j,[()=>{},()=>{let a;var b=this.A;const c=new ya;T(c,3,100,0);T(c,4,1E4,0);T(c,5,!0,!1);S(b.g,3)&&T(c,2,!0,!1);b=b.context;wa(b);0<=b.g.indexOf("amp")&&T(c,2,!0,!1);c&&(a=(new Ba(this.context,c)).wait());Y(this.context,"browserStart");Y(this.context,"browserStartEnd");Ea(this);Z(this,2);return a},()=>{Y(this.context,"browserReady");Y(this.context,"browserReadyEnd");Z(this,4);Y(this.context,"overallReady")},
()=>{Y(this.context,"browserQuiet");Y(this.context,"browserQuietEnd");Z(this,8)}])}};(function(a){let b=null;k("mys.engine.init",(c,d)=>{const e=V(ra,X(d,"render_config")||"[]");b=new Ha(c,d,e,a);b.init()});k("mys.engine.stage",()=>b?b.g.g:0)})(function(a,b,c){a=new xa(b);c=new Ca(a,c);return new Ma(a,c)});}).call(this);
